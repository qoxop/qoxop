<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="author" content="qoxop">
    <meta name="keywords" content="">
    <meta name="description" content="Extensions are small software programs that customize the browsing experience. They enable users to tailor Chrome functionality and behavior to individual needs or preferences. They are built on web technologies such as HTML, JavaScript, and CSS.">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="bookmark" href="/favicon.ico">
    <link rel="stylesheet" href="/assets/style/index.css">
    <title>chrome插件开发</title>
<link rel="stylesheet" href="/assets/code_styles/solarized-light.css"></head>
<body>
    <header>
        <div class="header">
            <h1><a class="unset" href="/">阿伟的网络日志</a></h1>
            <nav>
                <ul>
                    <li>
                        <a class="unset" href="/index.html">Home</a>
                    </li>
                    <li>
                        <a class="unset" href="/tags.html">Tags</a>
                    </li>
                    <li>
                        <a class="unset" href="/about.html">About</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <article id="article_main"><h1>chrome插件开发</h1><section class="article_info">
        <span class="author">author: qoxop</span>
        <span class="update_time">update at: 2019-04-06</span>
    </section><div class="from_markdown"><h2 id="%E5%AE%9A%E4%B9%89">定义</h2>
<blockquote>
<p>Extensions are small software programs that customize the browsing experience. They enable users to tailor Chrome functionality and behavior to individual needs or preferences. They are built on web technologies such as HTML, JavaScript, and CSS.</p>
</blockquote>
<h2 id="%E6%9E%84%E6%88%90">构成</h2>
<p>chrome插件主要由 <code>background scripts</code>, <code>content scripts</code>,  <code>options page</code> ,<code>UI elements(page action 和 browser action)</code></p>
<ul>
<li>background scripts：后台脚本，用于监听浏览器事件，执行指定任务</li>
<li>content scripts：被注入到页面内容中的脚本，可以于普通的js一样操作dom、也可以调用chrome平台提供的接口执行特别的任务(比如于后台脚本进行通讯)</li>
<li>options page：设置页面，给用户提供设置插件的功能</li>
<li>UI elements：界面元素，浏览器右上角处的插件小图标，点击执行某个任务，如：弹出popup、打开新页面等都可以，界面元素有两个级别，一个页面级别(只针对个别网页)，一个浏览器级别</li>
</ul>
<h2 id="%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">文件目录结构</h2>
<p>项目根目录必须有个 <code>manifest.json</code> 文件，用于描述和配置整个插件</p>
<h2 id="%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE-manifest.json-%E6%96%87%E4%BB%B6">如何配置 manifest.json 文件</h2>
<p>基本的描述信息</p>
<pre><code class="hljs language-json"> {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Getting Started Example"</span>,
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0"</span>,
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Build an Extension!"</span>,
    <span class="hljs-attr">"manifest_version"</span>: <span class="hljs-number">2</span>
  }
</code></pre>
<p>配置后台脚本</p>
<pre><code class="hljs language-json">{
    ..., // 描述信息
    <span class="hljs-attr">"background"</span>: {
      <span class="hljs-attr">"scripts"</span>: [<span class="hljs-string">"background.js"</span>],
      <span class="hljs-attr">"persistent"</span>: <span class="hljs-literal">false</span>
    }
}
</code></pre>
<p>配置权限, 插件需要用到的功能需用通过配置文件配置，否则无法使用</p>
<pre><code class="hljs language-json">{
    ..., // 描述信息
    <span class="hljs-attr">"permissions"</span>: [<span class="hljs-string">"storage"</span>],
    <span class="hljs-attr">"background"</span>: {
      <span class="hljs-attr">"scripts"</span>: [<span class="hljs-string">"background.js"</span>],
      <span class="hljs-attr">"persistent"</span>: <span class="hljs-literal">false</span>
    }
}
</code></pre>
<p>完整的配置和注释说明</p>
<pre><code class="hljs language-json">  {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Getting Started Example"</span>,
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0"</span>,
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Build an Extension!"</span>,
    <span class="hljs-attr">"manifest_version"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"permissions"</span>: [<span class="hljs-string">"storage"</span>],
    <span class="hljs-attr">"background"</span>: {
      <span class="hljs-attr">"scripts"</span>: [<span class="hljs-string">"background.js"</span>],
      <span class="hljs-attr">"persistent"</span>: <span class="hljs-literal">false</span>
    },
    <span class="hljs-attr">"page_action"</span>: {
      <span class="hljs-attr">"default_popup"</span>: <span class="hljs-string">"popup.html"</span>,
      <span class="hljs-attr">"default_icon"</span>: {
        <span class="hljs-attr">"16"</span>: <span class="hljs-string">"images/get_started16.png"</span>,
        <span class="hljs-attr">"32"</span>: <span class="hljs-string">"images/get_started32.png"</span>,
        <span class="hljs-attr">"48"</span>: <span class="hljs-string">"images/get_started48.png"</span>,
        <span class="hljs-attr">"128"</span>: <span class="hljs-string">"images/get_started128.png"</span>
      }
    },
    <span class="hljs-attr">"icons"</span>: {
      <span class="hljs-attr">"16"</span>: <span class="hljs-string">"images/get_started16.png"</span>,
      <span class="hljs-attr">"32"</span>: <span class="hljs-string">"images/get_started32.png"</span>,
      <span class="hljs-attr">"48"</span>: <span class="hljs-string">"images/get_started48.png"</span>,
      <span class="hljs-attr">"128"</span>: <span class="hljs-string">"images/get_started128.png"</span>
    },
    <span class="hljs-attr">"options_page"</span>: <span class="hljs-string">"options.html"</span>,
  }
</code></pre>
<pre><code class="hljs language-json">{
  // Required
  <span class="hljs-attr">"manifest_version"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"My Extension"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"versionString"</span>,

  // Recommended
  <span class="hljs-attr">"default_locale"</span>: <span class="hljs-string">"en"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"A plain text description"</span>,
  <span class="hljs-attr">"icons"</span>: { // 不同分辨率的插件图标
      <span class="hljs-attr">"16"</span>: <span class="hljs-string">"images/get_started16.png"</span>,
      <span class="hljs-attr">"32"</span>: <span class="hljs-string">"images/get_started32.png"</span>,
      <span class="hljs-attr">"48"</span>: <span class="hljs-string">"images/get_started48.png"</span>,
      <span class="hljs-attr">"128"</span>: <span class="hljs-string">"images/get_started128.png"</span>
  },

  // Pick one (or none)， 配置界面元素的，二选一，或全不要
  <span class="hljs-attr">"browser_action"</span>: {
  	<span class="hljs-attr">"default_icon"</span>: {
        <span class="hljs-attr">"16"</span>: <span class="hljs-string">"images/icon16.png"</span>,
        <span class="hljs-attr">"24"</span>: <span class="hljs-string">"images/icon24.png"</span>,
        <span class="hljs-attr">"32"</span>: <span class="hljs-string">"images/icon32.png"</span>
      },
      <span class="hljs-attr">"default_title"</span>: <span class="hljs-string">"Google Mail"</span>,
      <span class="hljs-attr">"default_popup"</span>: <span class="hljs-string">"popup.html"</span>
  },
  <span class="hljs-attr">"page_action"</span>: {...}, // 这里的配置与browser_action基本一致

  // Optional
  <span class="hljs-attr">"action"</span>: ...,
  <span class="hljs-attr">"author"</span>: ...,
  <span class="hljs-attr">"automation"</span>: ...,
  <span class="hljs-attr">"background"</span>: {
    // Recommended
    <span class="hljs-attr">"persistent"</span>: <span class="hljs-literal">false</span>,
    // Optional
    <span class="hljs-attr">"service_worker_script"</span>:
  },
  <span class="hljs-attr">"chrome_settings_overrides"</span>: {...},
  <span class="hljs-attr">"chrome_ui_overrides"</span>: {
    <span class="hljs-attr">"bookmarks_ui"</span>: {
      <span class="hljs-attr">"remove_bookmark_shortcut"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"remove_button"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-attr">"chrome_url_overrides"</span>: {...},
  <span class="hljs-attr">"commands"</span>: {...},
  <span class="hljs-attr">"content_capabilities"</span>: ...,
  <span class="hljs-attr">"content_scripts"</span>: [{...}],
  <span class="hljs-attr">"content_security_policy"</span>: <span class="hljs-string">"policyString"</span>,
  <span class="hljs-attr">"converted_from_user_script"</span>: ...,
  <span class="hljs-attr">"current_locale"</span>: ...,
  <span class="hljs-attr">"declarative_net_request"</span>: ...,
  <span class="hljs-attr">"devtools_page"</span>: <span class="hljs-string">"devtools.html"</span>,
  <span class="hljs-attr">"event_rules"</span>: [{...}],
  <span class="hljs-attr">"externally_connectable"</span>: {
    <span class="hljs-attr">"matches"</span>: [<span class="hljs-string">"*://*.example.com/*"</span>]
  },
  <span class="hljs-attr">"file_browser_handlers"</span>: [...],
  <span class="hljs-attr">"file_system_provider_capabilities"</span>: {
    <span class="hljs-attr">"configurable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"multiple_mounts"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"source"</span>: <span class="hljs-string">"network"</span>
  },
  <span class="hljs-attr">"homepage_url"</span>: <span class="hljs-string">"http://path/to/homepage"</span>,
  <span class="hljs-attr">"import"</span>: [{<span class="hljs-attr">"id"</span>: <span class="hljs-string">"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"</span>}],
  <span class="hljs-attr">"incognito"</span>: <span class="hljs-string">"spanning, split, or not_allowed"</span>,
  <span class="hljs-attr">"input_components"</span>: ...,
  <span class="hljs-attr">"key"</span>: <span class="hljs-string">"publicKey"</span>,
  <span class="hljs-attr">"minimum_chrome_version"</span>: <span class="hljs-string">"versionString"</span>,
  <span class="hljs-attr">"nacl_modules"</span>: [...],
  <span class="hljs-attr">"oauth2"</span>: ...,
  <span class="hljs-attr">"offline_enabled"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"omnibox"</span>: {
    <span class="hljs-attr">"keyword"</span>: <span class="hljs-string">"aString"</span>
  },
  <span class="hljs-attr">"optional_permissions"</span>: [<span class="hljs-string">"tabs"</span>],
  <span class="hljs-attr">"options_page"</span>: <span class="hljs-string">"options.html"</span>,
  <span class="hljs-attr">"options_ui"</span>: {
    <span class="hljs-attr">"chrome_style"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"page"</span>: <span class="hljs-string">"options.html"</span>
  },
  <span class="hljs-attr">"permissions"</span>: [<span class="hljs-string">"tabs"</span>],
  <span class="hljs-attr">"platforms"</span>: ...,
  <span class="hljs-attr">"requirements"</span>: {...},
  <span class="hljs-attr">"sandbox"</span>: [...],
  <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"Short Name"</span>,
  <span class="hljs-attr">"signature"</span>: ...,
  <span class="hljs-attr">"spellcheck"</span>: ...,
  <span class="hljs-attr">"storage"</span>: {
    <span class="hljs-attr">"managed_schema"</span>: <span class="hljs-string">"schema.json"</span>
  },
  <span class="hljs-attr">"system_indicator"</span>: ...,
  <span class="hljs-attr">"tts_engine"</span>: {...},
  <span class="hljs-attr">"update_url"</span>: <span class="hljs-string">"http://path/to/updateInfo.xml"</span>,
  <span class="hljs-attr">"version_name"</span>: <span class="hljs-string">"aString"</span>,
  <span class="hljs-attr">"web_accessible_resources"</span>: [...]
}
</code></pre>
</div><section class="tags_bar"></section></article>
        <aside> 
            <section class="assist-tool">
                <div class="back-to-top">
                    <em class="iconfont icon-top"></em>
                </div>
            </section>
        </aside>
    </main>
    <footer>
        <div class="scrollTips" id="scrollTips">
        </div>
        <section class="copyright">
            copyright © 2019 by zhangjiwei
        </section>
        <section class="ICP_NUM">
            <a href="http://www.miitbeian.gov.cn">
                粤ICP备19026817号-1
            </a>
        </section>
    </footer>
    <script src="/assets/script/common.js"></script>


<script src="/assets/script/article.js"></script></body></html>